<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Article – Les Échos Planète</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Playfair+Display:wght@700;800;900&family=Source+Sans+3:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --color-echos-green: #008e5a;
            --color-ink: #1a1a1a;
            --color-ink-soft: #4a4a4a;
            --color-muted: #6b7280;
            --color-border: #e5e7eb;
            --color-paper: #ffffff;
        }

        body {
            font-family: 'Source Sans 3', sans-serif;
            color: var(--color-ink);
            background: var(--color-paper);
        }

        .font-serif-title {
            font-family: 'Playfair Display', serif;
        }

        .font-serif-body {
            font-family: 'Libre Baskerville', serif;
        }

        .category-tag {
            color: var(--color-echos-green);
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 1rem;
            display: inline-block;
        }

        .article-content {
            font-family: 'Libre Baskerville', serif;
            line-height: 1.8;
            font-size: 1.125rem;
            color: #333;
        }

        .article-content p {
            margin-bottom: 1.5rem;
        }

        .article-content h1,
        .article-content h2,
        .article-content h3 {
            font-family: 'Playfair Display', serif;
            font-weight: 800;
            margin-top: 2.5rem;
            margin-bottom: 1rem;
            line-height: 1.2;
        }

        .article-content h1 {
            font-size: 2.5rem;
        }

        .article-content h2 {
            font-size: 1.8rem;
        }

        header .nav-link {
            font-weight: 500;
            color: var(--color-ink);
            font-size: 0.9rem;
            transition: color 0.2s;
        }

        header .nav-link:hover {
            color: var(--color-echos-green);
        }

        .social-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 1px solid var(--color-border);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-muted);
            transition: all 0.2s;
        }

        .social-btn:hover {
            border-color: var(--color-echos-green);
            color: var(--color-echos-green);
        }
    </style>
</head>

<body class="min-h-screen antialiased">
    <!-- En-tête (Identique à visitor.html) -->
    <header class="bg-white border-b border-stone-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6">
            <div class="flex items-center justify-between h-20">
                <!-- Logo -->
                <div class="flex items-center">
                    <a href="visitor.html" class="flex flex-col items-start leading-none">
                        <span class="text-xs font-bold tracking-widest uppercase text-stone-500 mb-1">Les Echos</span>
                        <span class="font-serif-title text-2xl font-black uppercase tracking-tighter">Planète</span>
                    </a>
                </div>

                <!-- Menu -->
                <nav class="hidden md:flex space-x-8">
                    <a href="visitor.html"
                        class="nav-link border-b-2 border-transparent hover:border-echos-green py-2">Enquêtes</a>
                    <a href="visitor.html"
                        class="nav-link border-b-2 border-transparent hover:border-echos-green py-2">Acteurs</a>
                    <a href="visitor.html"
                        class="nav-link border-b-2 border-echos-green py-2 text-echos-green">Solutions</a>
                    <a href="visitor.html"
                        class="nav-link border-b-2 border-transparent hover:border-echos-green py-2">Contributions</a>
                </nav>

                <!-- Search & Icons -->
                <div class="flex items-center space-x-4">
                    <button class="p-2 text-stone-500 hover:text-echos-green">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </button>
                    <div class="hidden sm:block h-6 w-px bg-stone-200 mx-2"></div>
                    <div class="hidden lg:flex items-center space-x-2">
                        <span
                            class="text-[10px] font-bold text-stone-400 uppercase tracking-widest leading-none text-right">Partenaire
                            exclusif<br>des Echos Planète</span>
                        <div
                            class="w-16 h-10 bg-stone-100 flex items-center justify-center rounded uppercase font-bold text-[8px] text-stone-400">
                            Rolex</div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main id="article-main" class="max-w-7xl mx-auto px-4 sm:px-6 py-12">
        <!-- Rempli par JS -->
    </main>

    <footer class="border-t border-stone-200 mt-20 py-12 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6">
            <div class="flex flex-col md:flex-row justify-between items-center gap-6 text-stone-500">
                <div class="flex flex-col items-start leading-none opacity-50">
                    <span class="text-[10px] font-bold tracking-widest uppercase mb-1">Les Echos</span>
                    <span class="font-serif-title text-xl font-black uppercase tracking-tighter">Planète</span>
                </div>
                <div class="flex gap-6 text-xs font-medium">
                    <a href="#" class="hover:text-black">Cookies</a>
                    <a href="#" class="hover:text-black">CGU-CGV</a>
                    <a href="#" class="hover:text-black">Politique de Confidentialité</a>
                </div>
                <p class="text-[10px] font-bold uppercase tracking-widest">© 2026 Les Echos Planète</p>
            </div>
        </div>
    </footer>

    <script src="data.js"></script>
    <script src="app.js"></script>
    <script>
        App.setRole('visitor');

        const mainEl = document.getElementById('article-main');

        function getQueryParam(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        function renderArticle() {
            const id = getQueryParam('id');
            const art = CMS.getArticleById(id);

            if (!art || art.statut !== 'certified') {
                window.location.href = 'visitor.html';
                return;
            }

            document.title = art.titre + ' – Les Échos Planète';

            const placeholder = 'https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?w=1600&q=80';
            const imageUrl = art.imageData || placeholder;

            mainEl.innerHTML = `
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-12">
          <!-- Left: Title and Content -->
          <div class="lg:col-span-8">
            <header class="mb-10">
              <span class="category-tag">Acteurs</span>
              <h1 class="font-serif-title text-4xl sm:text-6xl font-black leading-tight mb-8">
                ${art.titre.toUpperCase()}
              </h1>
              <div class="flex items-center gap-4 py-6 border-y border-stone-100 mb-10">
                <div class="w-10 h-10 rounded-full bg-stone-100 flex items-center justify-center font-bold text-stone-400">FL</div>
                <div class="text-xs uppercase tracking-widest">
                  <p class="font-bold text-black">Par <span class="text-echos-green">Rédaction Planète</span></p>
                  <p class="text-stone-400 mt-1">Publié le ${App.formatDate(art.datePublication)}</p>
                </div>
              </div>
            </header>

            <div class="flex flex-col md:flex-row gap-8">
              <!-- Sidebar Social -->
              <div class="hidden md:flex flex-col gap-4 sticky top-32 h-fit">
                <button class="social-btn"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/></svg></button>
                <button class="social-btn"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg></button>
              </div>

              <!-- Article Content -->
              <div class="flex-1">
                <div class="article-content">
                  <div class="font-bold text-xl mb-10 leading-relaxed text-black">
                    ${App.getExcerpt(art.contenu, 250)}
                  </div>
                  ${art.contenu}
                </div>
              </div>
            </div>
          </div>

          <!-- Right: Main Image -->
          <div class="lg:col-span-4 lg:order-first">
            <div class="aspect-[3/4] overflow-hidden sticky top-32">
              <img src="${imageUrl}" alt="" class="w-full h-full object-cover">
            </div>
          </div>
        </div>

        <!-- Footer Section (Others) -->
        <section class="mt-24 pt-16 border-t border-stone-200">
           <span class="category-tag">À lire aussi</span>
           <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mt-6">
              ${renderRelatedArticles(art.id)}
           </div>
        </section>
      `;
        }

        function renderRelatedArticles(currentId) {
            const articles = App.getArticlesForVisitor().filter(a => String(a.id) !== String(currentId)).slice(0, 4);
            return articles.map(art => `
        <article class="group">
          <a href="article.html?id=${art.id}" class="block">
            <div class="aspect-[16/9] overflow-hidden mb-4 bg-stone-100">
              <img src="${art.imageData || 'https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?w=600&q=80'}" alt="" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105">
            </div>
            <span class="category-tag !mb-2 !text-[0.6rem]">Solutions</span>
            <h3 class="font-serif-title text-base font-black leading-tight group-hover:text-echos-green transition-colors">
              ${art.titre}
            </h3>
          </a>
        </article>
      `).join('');
        }

        renderArticle();
    </script>
</body>

</html>